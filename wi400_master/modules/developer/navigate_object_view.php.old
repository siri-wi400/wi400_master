<?php
if($actionContext->getForm()=="DEFAULT") {
		//Richiesta Parametri Codice Sessione
		$searchAction = new wi400Detail("NAVIGATE_OBJECT_DETAIL", False);
		$searchAction->setTitle('Parametri');
		$searchAction->isEditable(true);
		$myField = new wi400InputText('FILE');
		$myField->setLabel("File Oggetto");
		$myField->addValidation('required');
		$myField->setMaxLength(200);
		$myField->setSize(200);
		$myField->setInfo("Inserire l'oggetto serializzato da navigare");
		$searchAction->addField($myField);
		
		$myField = new wi400InputText('TIPO');
		$myField->setLabel("Tipo Oggetto");
		$myField->addValidation('required');
		$myField->setMaxLength(10);
		$myField->setSize(10);
		$myField->setInfo("Inserire il tipo oggetto");
		$searchAction->addField($myField);
		
		$myButton = new wi400InputButton('SEARCH_BUTTON');
		$myButton->setLabel("Seleziona");
		$myButton->setAction($azione);
		$myButton->setForm("DETAIL");
		$myButton->setValidation(true);
		$searchAction->addButton($myButton);
		
		$searchAction->dispose();
} else if ($actionContext->getForm()=="DETAIL") {
	//$dati_reperiti = ob_get_clean();
	//ob_start();
	?>
	<!DOCTYPE html>
	<html lang="en">
	  <head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="icon" href="assets/images/favicon.ico">
		<title>PHP Object Browser</title>
	
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jstree/3.1.0/themes/default/style.min.css" />
		<link rel="stylesheet" href="modules/developer/assets/css/object-browser.css" />
	
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
		  <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		  <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	  </head>
	
	  <body>
		<main class="container">
	<?php
	if (is_file('includes.php') && is_readable('includes.php')) {
		require_once 'includes.php';
		echo '<div class="alert alert-info"><i class="fa fa-info-circle"></i> Class definitions from includes.php loaded.</div>';
	}
	require_once "developer_functions.php";
	define('RECURSION_SANITY_LIMIT',25);
	define('BASE_URL', "http://".getServerAddress().":".$_SERVER["SERVER_PORT"].$appBase."modules/developer/");
	error_reporting(E_ALL & ~E_NOTICE);
	$PARSED_OBJS = array();
	global $PARSED_OBJS;
	//$file="/www/zendsvr/data/_SESSION/spg6ah8ieflhn6acchn5d5d98m/SESSION_LIST_FILE_LIST.list";
	$contents = file_get_contents($file);
	if ($tipo!="SESSION") {
		$obj = unserialize($contents);
	} else {
		$obj = unserialize_php($contents);
    }
	echo '<div id="ajax-loader"><i class="fa fa-cog fa-spin fa-5x"></i></div>';
	echo "<div id='tree-1' style='display: none;'>\n<ul>\n";
	recurse_var("", $obj);
	echo "<ul>\n</div>\n";
	?>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jstree/3.1.0/jstree.min.js"></script>
		<script>
			$(document).ready(function(){
				$('#tree-1').jstree();
				$('#ajax-loader').hide();
				$('#tree-1').show();
			});
		</script>
		<script>
		$(document).ready(function () {
		$(".aaa").click(function() {
		if ($(this).is('input')) {
			//var input = $(this).text();
			//$(this).replaceWith(input);
		} else {	
		    //var input = "<input value='"+ $(this).text() + "' type='text'>";
		    //$(this).replaceWith("<span class='aaa'>"+input+"</span>");
		    //$(this).select();
		}	
		});
		});
		</script>
	  </body>
	</html>
	<?php 
	die();
	}
	?>

